@model PrivateTutorOnline.Models.ViewModels.TutorManagementViewModel
@using PagedList.Mvc;
@{
    ViewBag.Title = "Quản lí gia sư";
}

<h2>Danh sách gia sư</h2>

    @using (Html.BeginForm("TutorManagementView", "Admin", FormMethod.Get))
    {
        <div class="row">
            <div class="col-md-3" style="padding:20px;">
                <form class="navbar-form" role="search">
                    <div class="input-group add-on">
                        <input type="text" class="form-control" placeholder="Search" name="searchString" id="searchString">
                        <div class="input-group-btn">
                            <button class="btn btn-default" type="submit"><i class="glyphicon glyphicon-search"></i></button>
                        </div>
                    </div>
                </form>
            </div>

            <div style="display:inline-block; padding:10px;">

                <label>
                    <input style="transform:scale(1.5)" type="checkbox" name="IsSeachById" id="SearchByIdCheckBox" value="false" />
                    Tìm theo Mã số
                </label>
            </div>
        </div>
    }

<table class="table">
    <tr> 
        <th>
            @Html.DisplayNameFor(model => model.Tutors.FirstOrDefault().Id)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Tutors.FirstOrDefault().Image)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Tutors.FirstOrDefault().FullName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Tutors.FirstOrDefault().PhoneNumber)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Tutors.FirstOrDefault().Email)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Tutors.FirstOrDefault().City)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Tutors.FirstOrDefault().District)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Tutors.FirstOrDefault().Ward)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Tutors.FirstOrDefault().Street)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Tutors.FirstOrDefault().HomeTown)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Tutors.FirstOrDefault().DateOfBirth)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Tutors.FirstOrDefault().Gender)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Tutors.FirstOrDefault().IdentityNumber)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Tutors.FirstOrDefault().University)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Tutors.FirstOrDefault().MajorSubject)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Tutors.FirstOrDefault().GraduationYear)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Tutors.FirstOrDefault().Advantage)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Tutors.FirstOrDefault().Degree)
        </th>
        
        <th>
            @Html.DisplayNameFor(model => model.Tutors.FirstOrDefault().Grades)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Tutors.FirstOrDefault().Subjects)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Tutors.FirstOrDefault().IsActivate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Tutors.FirstOrDefault().IsEnable)
        </th>
        <th>
            Activate
        </th>
        <th>
            Enable
        </th>
    </tr>

@foreach (var item in Model.Tutors) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Id)
        </td>
        <td>
            @{
                var base64 = Convert.ToBase64String(item.Image);
                var imgSrc = String.Format("data:image/png;base64,{0}", base64);
            }
            <img src='@imgSrc' style="width:150px; height:150px">
            
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.FullName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.PhoneNumber)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Email)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.City)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.District)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Ward)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Street)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.HomeTown)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DateOfBirth)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Gender)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.IdentityNumber)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.University)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.MajorSubject)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.GraduationYear)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Advantage)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Degree)
        </td> 
        <td>
            @foreach (var i in item.Grades)
            {
                <div style="display:block; margin-bottom:5px; padding:5px 5px; background-color:#0080FF; color:white;"> Lớp @i.Name </div>
            }
        </td>
        <td>
            @foreach (var i in item.Subjects)
            {
                <div style="display:block; margin-bottom:5px; padding:5px 5px; background-color:#0080FF; color:white"> Môn @i.Name</div>
            }
        </td>
        <td class="row-tutor-is-activated-@item.Id">
            @if (item.IsActivate)
            {
                <span style="color:blue;">Đã kích hoạt</span>
            }
            else
            {
                <span style="color:blue;">Chưa kích hoạt</span>
            }
        </td>
        <td class="row-tutor-is-enable-@item.Id">
            @if (item.IsEnable)
            {
                <span style="color:blue;">Mở</span>
            }
            else
            {
                <span style="color:blue;">Khóa</span>
            }
        </td>
        <td>
            @if (!item.IsActivate)
            {
                <button class="btn btn-success activate-tutor" data-tutor-id="@item.Id">Kích hoạt</button>
            }
        </td>
        <td>
            @if (!item.IsEnable)
            {
                <input type="checkbox" style="transform: scale(1.5)" class="btn btn-info enable-tutor" data-tutor-id="@item.Id">
            }
            else
            {
                <input checked type="checkbox" style="transform: scale(1.5)" class="btn btn-info enable-tutor" data-tutor-id="@item.Id">
            }
        </td>
    </tr>
}

</table>
@Html.PagedListPager(Model.Tutors, page => Url.Action("TutorManagementView", "Admin", new { searchString = Model.searchString, page }))
@section Scripts {

    <script src="~/Scripts/AdminTutorManagement.js"> </script>
    <script src="~/Scripts/IsSearchByIdCheckBox.js"> </script>  
}
