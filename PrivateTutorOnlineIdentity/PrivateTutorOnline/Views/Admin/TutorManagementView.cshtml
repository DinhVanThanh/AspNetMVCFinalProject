@model PagedList.IPagedList<PrivateTutorOnline.Models.Tutor>
@using PagedList.Mvc;
@{
    ViewBag.Title = "TutorManagementView";
}

<h2>Danh sách gia sư</h2>
 
<table class="table">
    <tr> 
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().Image)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().FullName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().PhoneNumber)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().Email)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().City)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().District)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().Ward)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().Street)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().HomeTown)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().DateOfBirth)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().Gender)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().IdentityNumber)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().University)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().MajorSubject)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().GraduationYear)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().Advantage)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().Degree)
        </th>
        
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().Grades)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().Subjects)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().IsActivate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FirstOrDefault().IsEnable)
        </th>
        <th>
            Activate
        </th>
        <th>
            Enable
        </th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @{
                var base64 = Convert.ToBase64String(item.Image);
                var imgSrc = String.Format("data:image/png;base64,{0}", base64);
            }
            <img src='@imgSrc' style="width:150px; height:150px">
            
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.FullName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.PhoneNumber)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Email)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.City)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.District)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Ward)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Street)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.HomeTown)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DateOfBirth)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Gender)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.IdentityNumber)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.University)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.MajorSubject)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.GraduationYear)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Advantage)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Degree)
        </td> 
        <td>
            @foreach (var i in item.Grades)
            {
                <div style="display:block; margin-bottom:5px; padding:5px 5px; background-color:#0080FF; color:white;"> Lớp @i.Name </div>
            }
        </td>
        <td>
            @foreach (var i in item.Subjects)
            {
                <div style="display:block; margin-bottom:5px; padding:5px 5px; background-color:#0080FF; color:white"> Môn @i.Name</div>
            }
        </td>
        <td class="row-tutor-is-activated-@item.Id">
            @if (item.IsActivate)
            {
                <span style="color:blue;">Đã kích hoạt</span>
            }
            else
            {
                <span style="color:blue;">Chưa kích hoạt</span>
            }
        </td>
        <td class="row-tutor-is-enable-@item.Id">
            @if (item.IsEnable)
            {
                <span style="color:blue;">Mở</span>
            }
            else
            {
                <span style="color:blue;">Khóa</span>
            }
        </td>
        <td>
            @if (!item.IsActivate)
            {
                <button class="btn btn-success activate-tutor" data-tutor-id="@item.Id">Kích hoạt</button>
            }
        </td>
        <td>
            @if (!item.IsEnable)
            {
                <input type="checkbox" style="transform: scale(1.5)" class="btn btn-info enable-tutor" data-tutor-id="@item.Id">
            }
            else
            {
                <input checked type="checkbox" style="transform: scale(1.5)" class="btn btn-info enable-tutor" data-tutor-id="@item.Id">
            }
        </td>
    </tr>
}

</table>
@Html.PagedListPager(Model, page => Url.Action("TutorManagementView", "Admin", new { page }))
@section Scripts {

    <script src="~/Scripts/AdminTutorManagement.js">

    </script>
}
